<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: formTools/dropdownOptionSelection.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: formTools/dropdownOptionSelection.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Importing the CSS file for styling the dropdown selection
import '../../css/formTools/dropdownOptionSelection.css';

/**
 * Generates a custom dropdown with selectable options and optional search bar.
 *
 * @param {string} name - The name of the dropdown group (used as the name attribute of the hidden input).
 * @param {Array} options - An array of option objects with `label`, `value`, optional `icon`, `selected`, and `attributes`.
 * @param {string} [placeholder='Select options'] - Default placeholder text if no option is selected.
 * @param {boolean} [searchBar=false] - Whether to include a search input.
 * @param {Object} [attributes={}] - Optional attributes, supports:
 *   - class: Additional class for the container
 * @returns {string} - The HTML markup for the custom dropdown.
 */
export function generateDropdownOptions(name, options = [], placeholder = 'Select options', searchBar = false, attributes = {}) {
    // Determine the selected option (if any)
    let selectedOption = null;
    let selectedFound = false;

    options.forEach(option => {
        if (!option.label &amp;&amp; !option.value) {
            throw new Error("Each option must have at least a 'label' or 'value'.");
        }

        if (!option.label) option.label = option.value;
        if (!option.value) option.value = option.label;

        if (option.selected &amp;&amp; !selectedFound) {
            selectedOption = option;
            selectedFound = true;
        } else {
            option.selected = false;
        }
    });

    const displayPlaceholder = selectedOption?.label || placeholder;

    const wrapperAttrs = {
        class: `_form_group ${attributes.class || ''}`.trim(),
        ...attributes
    };

    let output = `&lt;div ${generateAttributes(wrapperAttrs)}>`;
    output += `
        &lt;div class="_dropdown_options_placeholder">
            &lt;span>${displayPlaceholder}&lt;/span>
            &lt;i class="fas fa-chevron-down">&lt;/i>
        &lt;/div>
        &lt;div class="_dropdown_options_wrapper">
            ${searchBar ? `&lt;input type="search" class="_dropdown_search" placeholder="Search...">` : ''}
            &lt;div class="_dropdown_options" data-dropdown_options_name="${name}">
    `;

    options.forEach(option => {
        const {
            label,
            value,
            icon,
            selected = false,
            attributes: optionAttributes = []
        } = option;

        const optionClasses = `_dropdown_option${selected ? ' _selected' : ''}`;
        const optionAttrs = {
            class: optionClasses,
            'data-dropdown_option_value': value,
            ...optionAttributes.reduce((acc, { name, value }) => {
                acc[name] = value;
                return acc;
            }, {})
        };

        output += `
            &lt;div ${generateAttributes(optionAttrs)}>
                ${icon ? `&lt;i class="${icon}">&lt;/i>` : ''}
                &lt;span class="_dropdown_option_label">${label}&lt;/span>
            &lt;/div>
        `;
    });

    output += `
            &lt;/div>
            &lt;input type="hidden" class="_dropdown_options_value" name="${name}" value="${selectedOption?.value || ''}" required>
        &lt;/div>
    &lt;/div>`;

    return output;
}

/**
 * Helper: Converts an object of attributes to HTML attribute string.
 *
 * @param {Object} attributes
 * @returns {string}
 */
function generateAttributes(attributes) {
    return Object.entries(attributes)
        .map(([key, value]) => `${key}="${value}"`)
        .join(' ');
}

/**
 * Dropdown behavior for custom dropdowns created by generateDropdownOptions().
 * Handles toggling options, updating input/placeholder, and icon switching.
 */
document.addEventListener("DOMContentLoaded", () => {
    document.addEventListener("click", (e) => {
        const placeholder = e.target.closest("._dropdown_options_placeholder");
        const option = e.target.closest("._dropdown_option");

        // Clicked inside a placeholder — toggle options
        if (placeholder) {
            const dropdownGroup = placeholder.closest("._form_group");

            // Toggle active state
            dropdownGroup.classList.toggle("_active");

            // Swap chevron icon
            const icon = placeholder.querySelector("i");
            if (icon) {
                icon.classList.toggle("fa-chevron-down");
                icon.classList.toggle("fa-chevron-up");
            }

            return; // stop here for placeholder clicks
        }

        // Clicked on an option
        if (option) {
            const optionsContainer = option.closest("._dropdown_options");
            const allOptions = optionsContainer.querySelectorAll("._dropdown_option");
            const dropdownGroup = option.closest("._form_group");

            const input = dropdownGroup.querySelector("._dropdown_options_value");
            const placeholderText = dropdownGroup.querySelector("._dropdown_options_placeholder span");

            // Remove _selected from all
            allOptions.forEach(opt => opt.classList.remove("_selected"));

            // Mark this one as selected
            option.classList.add("_selected");

            // Update placeholder text and input value
            placeholderText.textContent = option.querySelector("._dropdown_option_label").textContent;
            input.value = option.getAttribute("data-dropdown_option_value");

            // Close the dropdown
            dropdownGroup.classList.remove("_active");

            // Reset chevron icon
            const icon = dropdownGroup.querySelector("._dropdown_options_placeholder i");
            if (icon) {
                icon.classList.add("fa-chevron-down");
                icon.classList.remove("fa-chevron-up");
            }

            return;
        }

        // Clicked outside dropdown — close any open ones
        const dropdownWrapper = e.target.closest("._dropdown_options_wrapper");
        if (!dropdownWrapper) {
            document.querySelectorAll("._form_group._active").forEach(group => {
                group.classList.remove("_active");
    
                const icon = group.querySelector("._dropdown_options_placeholder i");
                if (icon) {
                    icon.classList.add("fa-chevron-down");
                    icon.classList.remove("fa-chevron-up");
                }
            });
        }
    });
});

/**
 * Dropdown search filtering logic.
 * Filters visible options as user types into the search input.
 */
document.addEventListener("DOMContentLoaded", () => {
    document.addEventListener("input", (e) => {
        const searchInput = e.target;
        if (!searchInput.closest("._dropdown_options_wrapper") || searchInput.type !== "search") return;

        const wrapper = searchInput.closest("._dropdown_options_wrapper");
        const optionsContainer = wrapper.querySelector("._dropdown_options");
        const filter = searchInput.value.trim().toLowerCase();

        optionsContainer.querySelectorAll("._dropdown_option").forEach(option => {
            const label = option.querySelector("._dropdown_option_label");
            const text = label ? label.textContent.trim().toLowerCase() : "";

            if (text.includes(filter)) {
                option.style.display = "";
            } else {
                option.style.display = "none";
            }
        });
    });
});

/**
 * 
 */
export const lcsDropdownOptionSelection = true;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Events</h3><ul><li><a href="global.html#event:click">click</a></li></ul><h3>Global</h3><ul><li><a href="global.html#alert">alert</a></li><li><a href="global.html#arrayHasSimilarItems">arrayHasSimilarItems</a></li><li><a href="global.html#capitalizeWords">capitalizeWords</a></li><li><a href="global.html#clearLocalDatabase">clearLocalDatabase</a></li><li><a href="global.html#createCityOptions">createCityOptions</a></li><li><a href="global.html#createCountryOptions">createCountryOptions</a></li><li><a href="global.html#createStateOptions">createStateOptions</a></li><li><a href="global.html#deleteLocalDatabaseData">deleteLocalDatabaseData</a></li><li><a href="global.html#filterArraySimilarItems">filterArraySimilarItems</a></li><li><a href="global.html#generateAttributes">generateAttributes</a></li><li><a href="global.html#generateCodes">generateCodes</a></li><li><a href="global.html#generateConfirmPasswordField">generateConfirmPasswordField</a></li><li><a href="global.html#generateCountrySelection">generateCountrySelection</a></li><li><a href="global.html#generateDropdownOptions">generateDropdownOptions</a></li><li><a href="global.html#generatePillOptions">generatePillOptions</a></li><li><a href="global.html#generateRadioOptions">generateRadioOptions</a></li><li><a href="global.html#getAllCities">getAllCities</a></li><li><a href="global.html#getAllCountries">getAllCountries</a></li><li><a href="global.html#getAllStates">getAllStates</a></li><li><a href="global.html#getCountriesLocalDatabase">getCountriesLocalDatabase</a></li><li><a href="global.html#getCountryCallingCode">getCountryCallingCode</a></li><li><a href="global.html#getCountryCurrencyCode">getCountryCurrencyCode</a></li><li><a href="global.html#getCountryFlag">getCountryFlag</a></li><li><a href="global.html#getCountryISOCode">getCountryISOCode</a></li><li><a href="global.html#getCountryOfficialName">getCountryOfficialName</a></li><li><a href="global.html#getCurrentLocation">getCurrentLocation</a></li><li><a href="global.html#getLocalDatabaseData">getLocalDatabaseData</a></li><li><a href="global.html#initializeLocalDatabase">initializeLocalDatabase</a></li><li><a href="global.html#lcsCloseContainerElement">lcsCloseContainerElement</a></li><li><a href="global.html#lcsDBCache">lcsDBCache</a></li><li><a href="global.html#lcsDropdownOptionSelection">lcsDropdownOptionSelection</a></li><li><a href="global.html#lcsFetchCountrySelectionData">lcsFetchCountrySelectionData</a></li><li><a href="global.html#lcsForm">lcsForm</a></li><li><a href="global.html#lcsFormInputLengthValidation">lcsFormInputLengthValidation</a></li><li><a href="global.html#lcsFormSubmission">lcsFormSubmission</a></li><li><a href="global.html#lcsGetCitiesFromLocalDatabase">lcsGetCitiesFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountriesFromLocalDatabase">lcsGetCountriesFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountryCallingCodeFromLocalDatabase">lcsGetCountryCallingCodeFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountryCurrencyCodeFromLocalDatabase">lcsGetCountryCurrencyCodeFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountryFlagFromLocalDatabase">lcsGetCountryFlagFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountryISOCodeFromLocalDatabase">lcsGetCountryISOCodeFromLocalDatabase</a></li><li><a href="global.html#lcsGetCountryOfficialNameFromLocalDatabase">lcsGetCountryOfficialNameFromLocalDatabase</a></li><li><a href="global.html#lcsGetNonce">lcsGetNonce</a></li><li><a href="global.html#lcsGetStatesFromLocalDatabase">lcsGetStatesFromLocalDatabase</a></li><li><a href="global.html#lcsHideSpinnerOverlay">lcsHideSpinnerOverlay</a></li><li><a href="global.html#lcsPillOptionSelection">lcsPillOptionSelection</a></li><li><a href="global.html#lcsShowHidePasswordEvent">lcsShowHidePasswordEvent</a></li><li><a href="global.html#lcsShowSpinnerOverlay">lcsShowSpinnerOverlay</a></li><li><a href="global.html#lcsStoreCitiesInLocalDatabase">lcsStoreCitiesInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountriesInLocalDatabase">lcsStoreCountriesInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountryCallingCodeInLocalDatabase">lcsStoreCountryCallingCodeInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountryCurrencyCodeInLocalDatabase">lcsStoreCountryCurrencyCodeInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountryFlagInLocalDatabase">lcsStoreCountryFlagInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountryISOCodeInLocalDatabase">lcsStoreCountryISOCodeInLocalDatabase</a></li><li><a href="global.html#lcsStoreCountryOfficialNameInLocalDatabase">lcsStoreCountryOfficialNameInLocalDatabase</a></li><li><a href="global.html#lcsStoreStatesInLocalDatabase">lcsStoreStatesInLocalDatabase</a></li><li><a href="global.html#passwordStrength">passwordStrength</a></li><li><a href="global.html#scrollTo">scrollTo</a></li><li><a href="global.html#sendAjaxRequest">sendAjaxRequest</a></li><li><a href="global.html#storeLocalDatabaseData">storeLocalDatabaseData</a></li><li><a href="global.html#updateLocalDatabaseData">updateLocalDatabaseData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
